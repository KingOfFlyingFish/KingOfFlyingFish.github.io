---
layout: post
title: 유니티에서 부동소수점 계산에 == 대신 사용할 수 있는 것.
feature-img: #"assets/img/blog/2017-09-17.jpg"
thumbnail: #"assets/img/blog/2017-09-17.jpg"
tags: [유니티, 팁]
---

게임을 개발하다보면 int 보다 float 형을 자주 사용하는 것 같습니다. 이런 부동소수점 계산을 할 때 '==' 연산자를 이용하면 정확한 계산이 안될 수 있습니다. 예를 들어 아래와 같이 10f 와 (20f - 10f)는 항상 같은 값이어야 하지만 정확한 값을 알 수 없는 부동소수점의 특징으로 인해 if 문 내부가 실행이 안 될 수도 있는 것이죠.

~~~c#
if (10f == (20f - 10f))
{
    System.Console.WriteLine("같은 값"); //이 명령이 호출 안 될 수도 있음.
}
~~~

무의식적으로 이렇게 작성하는 경우가 많기 때문에, 부동소수점을 다룰 때에는 항상 조심해야 합니다. 그래서 저는 지금까지 부동소수점의 크기가 같음을 비교하기 위해 아래와 같이 사용하였습니다.

~~~c#
if(Mathf.Abs((20f-10f) - 10f) < Mathf.Epsilon)
{
    System.Console.WriteLine("같은 값");
}
~~~

조금 복잡하지만 Abs 함수로 각 변수를 뺀 절대값을 구하고, 그 절대값이 float형에서 허용하는 최소값(Mathf.Epsilon)보다 작으면 같다고 생각한다는 뜻의 구문입니다. 그냥 쓰기는 조금 복잡하고 자주 사용하기 때문에 Util 형식의 함수로 빼내어 사용하곤 했었죠.

그렇게 지금까지는 이렇게 쓰다가, 혹시 더 편한 방법이 없을까 싶어 찾아보니 역시나...더 쉬운 방법이 있습니다.

~~~c#
if(Mathf.Approximately((20f - 10f), 10f))
{
    System.Console.WriteLine("같은 값");
}
~~~~

으어어어...여러분은 저처럼 삽질 하지 마시고 꼭 Approximately 함수를 사용하시기 바랍니다.

> ㅠㅜ..